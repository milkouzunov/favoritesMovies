{"ast":null,"code":"import config from './config';\nexport async function addRatings(rating) {\n  const token = localStorage.getItem('token');\n  return await fetch(`${config.API_URL}/movies/ratings`, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify(rating)\n  });\n}\nexport async function addComment(comment) {\n  const token = localStorage.getItem('token');\n\n  try {\n    const response = await await fetch(`${config.API_URL}/movies/notes`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(comment)\n    });\n\n    if (response.ok == false) {\n      let error = await response.json();\n\n      if (error.error) {\n        error = error.error;\n      }\n\n      throw new Error(error);\n    }\n\n    try {\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      return response;\n    }\n  } catch (err) {\n    throw err;\n  }\n}","map":{"version":3,"sources":["/media/uzunov/78604C4A604C1174/favorites-movies/src/services/reviewService.js"],"names":["config","addRatings","rating","token","localStorage","getItem","fetch","API_URL","method","headers","Authorization","body","JSON","stringify","addComment","comment","response","ok","error","json","Error","data","err"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AAEA,OAAO,eAAeC,UAAf,CAA2BC,MAA3B,EAAmC;AACtC,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEA,SAAO,MAAMC,KAAK,CAAE,GAAEN,MAAM,CAACO,OAAQ,iBAAnB,EAAqC;AACnDC,IAAAA,MAAM,EAAE,MAD2C;AAEnDC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAELC,MAAAA,aAAa,EAAI,UAASP,KAAM;AAF3B,KAF0C;AAMnDQ,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,MAAf;AAN6C,GAArC,CAAlB;AAQH;AAED,OAAO,eAAeY,UAAf,CAA2BC,OAA3B,EAAoC;AACvC,QAAMZ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AAEA,MAAI;AACA,UAAMW,QAAQ,GAAG,MAAM,MAAMV,KAAK,CAAE,GAAEN,MAAM,CAACO,OAAQ,eAAnB,EAAmC;AACjEC,MAAAA,MAAM,EAAE,MADyD;AAEjEC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAELC,QAAAA,aAAa,EAAI,UAASP,KAAM;AAF3B,OAFwD;AAMjEQ,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeE,OAAf;AAN2D,KAAnC,CAAlC;;AASA,QAAIC,QAAQ,CAACC,EAAT,IAAe,KAAnB,EAA0B;AACtB,UAAIC,KAAK,GAAI,MAAMF,QAAQ,CAACG,IAAT,EAAnB;;AACA,UAAID,KAAK,CAACA,KAAV,EAAiB;AACbA,QAAAA,KAAK,GAAGA,KAAK,CAACA,KAAd;AACH;;AAED,YAAM,IAAIE,KAAJ,CAAUF,KAAV,CAAN;AACH;;AAED,QAAI;AACA,YAAMG,IAAI,GAAG,MAAML,QAAQ,CAACG,IAAT,EAAnB;AACA,aAAOE,IAAP;AACH,KAHD,CAGE,OAAOC,GAAP,EAAW;AACT,aAAON,QAAP;AACH;AAEJ,GA1BD,CA0BE,OAAOM,GAAP,EAAY;AACV,UAAMA,GAAN;AACH;AAEJ","sourcesContent":["import config from './config';\n\nexport async function addRatings (rating) {\n    const token = localStorage.getItem('token');\n\n    return await fetch(`${config.API_URL}/movies/ratings`, {\n        method: 'post',\n        headers: {\n            'Content-Type': 'application/json',\n            Authorization:  `Bearer ${token}`\n        },\n        body: JSON.stringify(rating)\n    });\n}\n\nexport async function addComment (comment) {\n    const token = localStorage.getItem('token');\n\n    try {\n        const response = await await fetch(`${config.API_URL}/movies/notes`, {\n            method: 'post',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization:  `Bearer ${token}`\n            },\n            body: JSON.stringify(comment)\n        });\n\n        if (response.ok == false) {\n            let error = (await response.json());\n            if( error.error) {\n                error = error.error;\n            }\n            \n            throw new Error(error);\n        }\n\n        try {\n            const data = await response.json();\n            return data;\n        } catch (err){\n            return response;\n        }\n\n    } catch (err) {\n        throw err;\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}